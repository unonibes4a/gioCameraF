<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C치mara y Filtro Gris</title>
    <style>
        body{
            margin: 0%;
            padding: 0%;
            display: flex;
            flex-direction: column;
            flex-wrap: nowrap;
            justify-content: flex-start;
            align-items: center;
            align-content: stretch;
        }
        body *{
            margin-bottom: 0.2rem;
        }
        #videoElement {
            display: none;
        }
        canvas {
            border: 1px solid black;
            width: 100%;
            min-width: 260px;
             
            max-width: 460px;

            height: 100%;
            min-height: 300px;
           
            max-height: 460px;
        }
        button{
            width: 100px;
            height: 40px;
        }
    </style>
</head>
<body>
    <video id="videoElement" autoplay></video>
    <canvas id="canvas"></canvas>
    <canvas id="canvas2"></canvas>
    <br>
    <button id="switchCamera">Cambiar C치mara</button>
    <button id="takePhoto">Tomar Foto</button>
    <button id="applyFilter">Aplicar Filtro Gris</button>
    <button id="startCamera">Iniciar C치mara</button>

    <script>  
const _0x503a4d=_0x4d73;(function(_0x19df9a,_0xdbd97a){const _0xdcec3b=_0x4d73,_0x14fcb7=_0x19df9a();while(!![]){try{const _0x1184e5=-parseInt(_0xdcec3b(0x176))/0x1+parseInt(_0xdcec3b(0x17c))/0x2+parseInt(_0xdcec3b(0x178))/0x3*(-parseInt(_0xdcec3b(0x16f))/0x4)+-parseInt(_0xdcec3b(0x18b))/0x5*(parseInt(_0xdcec3b(0x187))/0x6)+parseInt(_0xdcec3b(0x174))/0x7*(parseInt(_0xdcec3b(0x17b))/0x8)+-parseInt(_0xdcec3b(0x17d))/0x9*(parseInt(_0xdcec3b(0x179))/0xa)+-parseInt(_0xdcec3b(0x180))/0xb*(-parseInt(_0xdcec3b(0x189))/0xc);if(_0x1184e5===_0xdbd97a)break;else _0x14fcb7['push'](_0x14fcb7['shift']());}catch(_0x5ecc32){_0x14fcb7['push'](_0x14fcb7['shift']());}}}(_0x4a33,0x99f5f));const video=document[_0x503a4d(0x186)](_0x503a4d(0x18d)),canvas=document[_0x503a4d(0x186)](_0x503a4d(0x193)),ctx=canvas[_0x503a4d(0x196)]('2d'),switchButton=document[_0x503a4d(0x186)](_0x503a4d(0x171)),photoButton=document[_0x503a4d(0x186)](_0x503a4d(0x175)),filterButton=document[_0x503a4d(0x186)]('applyFilter'),startButton=document[_0x503a4d(0x186)](_0x503a4d(0x192));let currentStream,facingMode=_0x503a4d(0x173);canvas['width']=0x280,canvas[_0x503a4d(0x172)]=0x1e0;async function startCamera(){const _0x1ce18c=_0x503a4d;currentStream&&currentStream['getTracks']()[_0x1ce18c(0x17a)](_0xea11c8=>_0xea11c8['stop']());const _0xa54539={'video':{'facingMode':facingMode}};try{currentStream=await navigator[_0x1ce18c(0x197)][_0x1ce18c(0x18f)](_0xa54539),video[_0x1ce18c(0x170)]=currentStream;}catch(_0xa1a8b9){console['error'](_0x1ce18c(0x185),_0xa1a8b9);}}startButton['addEventListener'](_0x503a4d(0x191),()=>{const _0x56fb8c=_0x503a4d;startCamera(),video[_0x56fb8c(0x195)][_0x56fb8c(0x17f)]='block';}),switchButton['addEventListener']('click',()=>{const _0xd271b0=_0x503a4d;facingMode=facingMode===_0xd271b0(0x173)?'environment':_0xd271b0(0x173),startCamera();}),photoButton[_0x503a4d(0x18c)](_0x503a4d(0x191),()=>{const _0x10b572=_0x503a4d;ctx[_0x10b572(0x181)](video,0x0,0x0,canvas[_0x10b572(0x188)],canvas[_0x10b572(0x172)]);});function applyGrayFilter(_0x52e04c){return _0x52e04c=color162024(_0x52e04c),_0x52e04c;}filterButton[_0x503a4d(0x18c)](_0x503a4d(0x191),()=>{const _0x1b349d=_0x503a4d,_0x265a70=ctx[_0x1b349d(0x183)](0x0,0x0,canvas[_0x1b349d(0x188)],canvas[_0x1b349d(0x172)]),_0x2d8a74=applyGrayFilter(_0x265a70);ctx[_0x1b349d(0x184)](_0x2d8a74,0x0,0x0),convertirADibujoSutil(0x14);});function _0x4d73(_0xe16508,_0x4444b2){const _0x4a331f=_0x4a33();return _0x4d73=function(_0x4d735c,_0x1bac09){_0x4d735c=_0x4d735c-0x16e;let _0x700d9a=_0x4a331f[_0x4d735c];return _0x700d9a;},_0x4d73(_0xe16508,_0x4444b2);}function _0x4a33(){const _0x79e089=['srcObject','switchCamera','height','user','112njKmZN','takePhoto','154854rfKXAL','fillRect','642021zgiBHz','2786180gKgYcN','forEach','241344tjKrFl','2470188pAGQxL','9msWnvu','random','display','264IforpF','drawImage','data','getImageData','putImageData','Error\x20accediendo\x20a\x20la\x20c치mara:\x20','getElementById','6562536ZBtczO','width','755052eQclDb','fillStyle','5vCTJbQ','addEventListener','videoElement','min','getUserMedia','max','click','startCamera','canvas','#87CEEB','style','getContext','mediaDevices','length','20OdTftr'];_0x4a33=function(){return _0x79e089;};return _0x4a33();}function applyFilterToFrame(){const _0x369623=_0x503a4d;ctx[_0x369623(0x181)](video,0x0,0x0,canvas[_0x369623(0x188)],canvas[_0x369623(0x172)]);let _0x222cff=ctx[_0x369623(0x183)](0x0,0x0,canvas['width'],canvas[_0x369623(0x172)]);_0x222cff=applyGrayFilter(_0x222cff),ctx['putImageData'](_0x222cff,0x0,0x0),convertirADibujoSutil(0x14),requestAnimationFrame(applyFilterToFrame);}startButton[_0x503a4d(0x18c)](_0x503a4d(0x191),()=>{const _0x57804d=_0x503a4d;startCamera(),video['style'][_0x57804d(0x17f)]='block',applyFilterToFrame();});function color162024(_0x4e0673){const _0x28369f=_0x503a4d;let _0x58ac6c=_0x4e0673[_0x28369f(0x182)];var _0xa00be4={'r':0x0,'g':0x0,'b':0x0},_0x2a961f=function(_0x54a654,_0x510ee8=0.4,_0x4975b3=0x0){rgba2={'r':0.55,'g':0.56,'b':0.335};let _0xed8e7d=0.56/_0x4975b3;rgba2['r']*=_0xed8e7d,rgba2['g']*=_0xed8e7d,rgba2['b']*=_0xed8e7d;_0x510ee8>0x1&&(_0x510ee8=0x1);_0x510ee8<0x0&&(_0x510ee8=0x0);var _0x46ba45=0x1-_0x510ee8;return _0x54a654['r']=_0x54a654['r']*_0x46ba45+rgba2['r']*_0x510ee8,_0x54a654['g']=_0x54a654['g']*_0x46ba45+rgba2['g']*_0x510ee8,_0x54a654['b']=_0x54a654['b']*_0x46ba45+rgba2['b']*_0x510ee8,_0x54a654;};for(let _0x31ea56=0x0;_0x31ea56<_0x58ac6c[_0x28369f(0x16e)];_0x31ea56+=0x4){_0xa00be4['r']=_0x58ac6c[_0x31ea56]/0xff,_0xa00be4['g']=_0x58ac6c[_0x31ea56+0x1]/0xff,_0xa00be4['b']=_0x58ac6c[_0x31ea56+0x2]/0xff;let _0x26ea8f=Math[_0x28369f(0x190)](_0xa00be4['r'],_0xa00be4['g'],_0xa00be4['b']),_0x358510=Math[_0x28369f(0x190)](_0xa00be4['r'],_0xa00be4['g'],_0xa00be4['b'])*1.014+0.051;_0x358510>0.9&&(_0x358510=0.9);let _0x4dec70=_0x26ea8f*0.042;_0xa00be4['r']=_0xa00be4['r']+_0x4dec70,_0xa00be4['g']=_0xa00be4['g']+_0x4dec70,_0xa00be4['b']=_0xa00be4['b']+_0x4dec70,_0x4dec70=_0x358510,_0x26ea8f=Math['max'](_0xa00be4['r'],_0xa00be4['g'],_0xa00be4['b']);let _0x4ec03b=simpleLinealFuncion(0.5,0.45,0x1,0x1,_0x26ea8f);_0x4ec03b=_0x4ec03b+_0x4ec03b*_0x4ec03b*0.21,_0xa00be4['r']*=_0x4ec03b;;_0x58ac6c[_0x31ea56]=_0xa00be4['r']*0xff,_0x58ac6c[_0x31ea56+0x1]=_0xa00be4['g']*0xff,_0x58ac6c[_0x31ea56+0x2]=_0xa00be4['b']*0xff;}return _0x4e0673;}function simpleLinealFuncion(_0x383ea3,_0x3b8e83,_0x158131,_0x1a9bd9,_0x4fdff3){let _0x4a8340=0x0,_0x45e852=0x0,_0x164372=_0x158131-_0x383ea3;if(_0x164372==0x0||_0x164372==0x0||_0x164372==0x0)return(_0x1a9bd9-_0x3b8e83)*0.5;let _0x533fd0=_0x1a9bd9-_0x3b8e83;_0x4a8340=_0x533fd0/_0x164372,_0x45e852=_0x1a9bd9-_0x4a8340*_0x158131;let _0x2bc0fe=null;return _0x2bc0fe=_0x4a8340*_0x4fdff3+_0x45e852,_0x2bc0fe;}function convertirADibujoSutil(_0x2748dc=0x14){const _0x766ecd=_0x503a4d;let _0x254d0a=document[_0x766ecd(0x186)]('canvas'),_0x5c7b2c=_0x254d0a[_0x766ecd(0x196)]('2d');const _0x1e21f7=_0x5c7b2c['getImageData'](0x0,0x0,_0x254d0a['width'],_0x254d0a[_0x766ecd(0x172)]),_0x355d69=_0x1e21f7['data'],_0x222be0=_0x254d0a['width'],_0x458935=_0x254d0a['height'],_0x43b1b1=_0x5c7b2c['createImageData'](_0x222be0,_0x458935),_0x550765=_0x43b1b1[_0x766ecd(0x182)];_0x5c7b2c[_0x766ecd(0x18a)]=_0x766ecd(0x194),_0x5c7b2c[_0x766ecd(0x177)](0x0,0x0,_0x254d0a[_0x766ecd(0x188)],_0x254d0a[_0x766ecd(0x172)]);for(let _0x3ac7b2=0x1;_0x3ac7b2<_0x458935-0x1;_0x3ac7b2++){for(let _0x516768=0x1;_0x516768<_0x222be0-0x1;_0x516768++){const _0x566c8f=(_0x3ac7b2*_0x222be0+_0x516768)*0x4;let _0x13fe07=-_0x355d69[((_0x3ac7b2-0x1)*_0x222be0+(_0x516768-0x1))*0x4]+_0x355d69[((_0x3ac7b2-0x1)*_0x222be0+(_0x516768+0x1))*0x4]+-0x2*_0x355d69[(_0x3ac7b2*_0x222be0+(_0x516768-0x1))*0x4]+0x2*_0x355d69[(_0x3ac7b2*_0x222be0+(_0x516768+0x1))*0x4]+-_0x355d69[((_0x3ac7b2+0x1)*_0x222be0+(_0x516768-0x1))*0x4]+_0x355d69[((_0x3ac7b2+0x1)*_0x222be0+(_0x516768+0x1))*0x4],_0x2f88a7=-_0x355d69[((_0x3ac7b2-0x1)*_0x222be0+(_0x516768-0x1))*0x4]+-0x2*_0x355d69[((_0x3ac7b2-0x1)*_0x222be0+_0x516768)*0x4]+-_0x355d69[((_0x3ac7b2-0x1)*_0x222be0+(_0x516768+0x1))*0x4]+_0x355d69[((_0x3ac7b2+0x1)*_0x222be0+(_0x516768-0x1))*0x4]+0x2*_0x355d69[((_0x3ac7b2+0x1)*_0x222be0+_0x516768)*0x4]+_0x355d69[((_0x3ac7b2+0x1)*_0x222be0+(_0x516768+0x1))*0x4],_0x570f13=Math['sqrt'](_0x13fe07*_0x13fe07+_0x2f88a7*_0x2f88a7),_0x3d6328=_0x570f13>_0x2748dc?0xff-Math[_0x766ecd(0x18e)](_0x570f13,0xff):0xff;_0x3d6328=_0x3d6328+(Math[_0x766ecd(0x17e)]()*0xa-0x5),_0x3d6328=Math[_0x766ecd(0x190)](0x0,Math['min'](0xff,_0x3d6328)),_0x550765[_0x566c8f]=_0x3d6328,_0x550765[_0x566c8f+0x1]=_0x3d6328,_0x550765[_0x566c8f+0x2]=_0x3d6328,_0x550765[_0x566c8f+0x3]=0xff;}}let _0x1b8694=document[_0x766ecd(0x186)]('canvas2');_0x1b8694[_0x766ecd(0x188)]=_0x254d0a[_0x766ecd(0x188)],_0x1b8694[_0x766ecd(0x172)]=_0x254d0a[_0x766ecd(0x172)];let _0x50de26=_0x1b8694[_0x766ecd(0x196)]('2d');_0x50de26['putImageData'](_0x43b1b1,0x0,0x0);}
 
    </script>
</body>
</html>
